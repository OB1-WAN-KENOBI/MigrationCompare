# MigrationCompare

Сравнение условий жизни в разных странах для миграции. 16 стран с детальной информацией о стоимости жизни, безопасности, налогах и других важных показателях.

## 🚀 Технологии

- **React 19** + **TypeScript** — строгая типизация
- **Vite** — сборка и dev-сервер
- **MUI v6** — UI компоненты + тёмная/светлая тема
- **React Router 7** — маршрутизация с lazy loading
- **TanStack Query v5** — кеширование данных
- **react-i18next** — интернационализация (RU/EN)
- **Recharts** — графики и визуализация
- **Vitest** — unit-тестирование

## 📁 Структура проекта (Feature-Sliced Design)

```
├── public/
│   ├── data/
│   │   └── countries.json      # Данные о странах
│   └── locales/                # Переводы (ru/en)
├── src/
│   ├── app/                    # Инициализация приложения
│   │   ├── providers/          # QueryClient, Theme, I18n
│   │   ├── router/             # Конфигурация маршрутов
│   │   └── styles/             # Глобальные стили, тема
│   ├── pages/                  # Страницы
│   │   ├── CountriesPage/      # Главная — список стран
│   │   ├── CountryPage/        # Детали страны + графики
│   │   ├── ComparePage/        # Таблица сравнения
│   │   └── FavoritesPage/      # Избранные страны
│   ├── widgets/                # Крупные блоки UI
│   │   ├── Header/             # Шапка с навигацией
│   │   ├── Sidebar/            # Боковая панель
│   │   └── CountryFilterPanel/ # Панель фильтров
│   ├── features/               # Пользовательские сценарии
│   │   ├── SearchCountries/    # Поиск по названию
│   │   ├── CompareList/        # Управление сравнением
│   │   └── Favorites/          # Управление избранным
│   ├── entities/               # Бизнес-сущности
│   │   ├── country/            # Модель страны
│   │   │   └── model/          # Типы, агрегатор данных
│   │   ├── CountryCard/        # Карточка страны
│   │   ├── CountryDetails/     # Детальная информация
│   │   └── MetricItem/         # Элемент метрики
│   └── shared/                 # Переиспользуемый код
│       ├── api/                # HTTP клиент, endpoints
│       │   └── countries/      # REST Countries, external sources
│       ├── config/             # Константы, env
│       │   └── countries/      # Ручная конфигурация стран
│       ├── lib/                # Хуки, stores
│       ├── types/              # TypeScript типы
│       └── ui/                 # Базовые компоненты
└── tests/                      # Тесты
    └── unit/                   # Unit-тесты
        ├── filters.test.ts     # Тесты фильтрации/сортировки
        └── stores.test.ts      # Тесты stores
```

## 🛠 Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск dev-сервера
npm run dev

# Сборка для продакшена
npm run build

# Предпросмотр сборки
npm run preview

# Запуск тестов
npm test

# Запуск тестов в watch режиме
npm run test:watch

# Проверка типов
npm run type-check

# Линтинг
npm run lint
```

## 📊 Источники данных

Приложение использует реальные данные из внешних API:

- **REST Countries API** — базовая информация о странах (название, флаг, население, валюта, языки)
- **Pexels API** — фотографии стран (опционально, требуется API ключ)
- **manualData.ts** — специфическая информация (визы, стоимость жизни, безопасность, налоги, русскоязычное комьюнити и т.п.)
- **External Sources** — опциональные дополнительные API для расширенных данных (Numbeo, Teleport и т.п.)

**Примечание:**

- Отображаются только страны, для которых есть ручная конфигурация в `manualData.ts`. Это позволяет контролировать качество данных и дополнять их специфической информацией, которая недоступна в публичных API.
- Для отображения фотографий стран на странице деталей требуется API ключ Pexels. Получить ключ можно на [pexels.com/api](https://www.pexels.com/api/). Добавьте `VITE_PEXELS_API_KEY=your_api_key` в файл `.env`. Без ключа фотографии не будут загружаться, но приложение будет работать нормально.

## 📱 Страницы

### Главная (`/`)

- 🗂 Карточки 16 стран с основной информацией
- 🔍 Поиск по названию (RU/EN)
- 🎛 Фильтры: безопасность, климат, английский, аренда, налоги
- 📊 Сортировка: стоимость жизни, аренда, безопасность, зарплата, иммиграция
- ❤️ Добавление в избранное
- ⚖️ Добавление в сравнение (до 5 стран)

### Страница страны (`/country/:id`)

- 📋 Полная информация о стране
- 📊 График расходов (BarChart)
- 🎯 Радарная диаграмма качества жизни
- ⚖️ Кнопка добавления в сравнение

### Сравнение (`/compare`)

- 📊 Таблица сравнения (MUI DataGrid)
- 🟢 Зелёный — лучший показатель
- 🔴 Красный — худший показатель
- 🗑 Удаление стран из сравнения
- 💾 Сохранение в localStorage

### Избранное (`/favorites`)

- ❤️ Список избранных стран
- 🗂 Те же карточки, что на главной
- 💾 Сохранение в localStorage

## 🌐 Локализация

| Язык       | Код                 |
| ---------- | ------------------- |
| 🇷🇺 Русский | `ru` (по умолчанию) |
| 🇬🇧 English | `en`                |

Переключение языка в Header.

## 🎨 Темы

- 🌙 **Тёмная тема** (по умолчанию)
- ☀️ **Светлая тема**

Акцентные цвета: бирюзовый `#22d3ee`, индиго `#6366f1`

## ✨ Особенности

- 🎬 **Анимации переходов** — плавный Fade при смене страниц
- 📱 **Адаптивный дизайн** — мобильная версия с боковым меню
- ⚡ **Lazy loading** — страницы загружаются по требованию
- 🔄 **Кеширование** — TanStack Query кеширует данные
- 💾 **Персистентность** — сравнение и избранное сохраняются в localStorage

## 🧪 Тестирование

```bash
npm test
```

**38 тестов** покрывают:

- ✅ Фильтрация по всем параметрам
- ✅ Сортировка по всем полям
- ✅ Поиск (RU/EN, регистронезависимый)
- ✅ Compare store (добавление, удаление, лимит, localStorage)
- ✅ Favorites store (добавление, удаление, localStorage)

## 🚀 Деплой

### GitHub Pages (автоматический)

При пуше в `main` запускается GitHub Actions workflow:

1. ✅ Установка зависимостей
2. ✅ Запуск тестов
3. ✅ Проверка типов
4. ✅ Сборка
5. ✅ Деплой на GitHub Pages

**URL:** `https://<username>.github.io/MigrationCompare`

### GitHub Pages (ручной)

```bash
# Установить gh-pages (уже в devDependencies)
npm install

# Сборка и деплой
npm run deploy
```

### Vercel / Netlify

```bash
npm run build
# Директория сборки: dist/
```
